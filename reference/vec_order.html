<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Order and sort vectors — vec_order • vctrs</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Order and sort vectors — vec_order"><meta property="og:description" content="vec_order() computes the order of x. For data frames, the order is
computed along the rows by computing the order of the first column and
using subsequent columns to break ties.
vec_sort() sorts x. It is equivalent to vec_slice(x, vec_order(x))."><meta property="og:image" content="https://vctrs.r-lib.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vctrs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.8.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pillar.html">Printing vectors nicely in tibbles</a>
    </li>
    <li>
      <a href="../articles/s3-vector.html">S3 vectors</a>
    </li>
    <li>
      <a href="../articles/stability.html">Type and size stability</a>
    </li>
    <li>
      <a href="../articles/type-size.html">Prototypes and sizes</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-lib/vctrs/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Order and sort vectors</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-lib/vctrs/blob/HEAD/R/order.R" class="external-link"><code>R/order.R</code></a></small>
    <div class="hidden name"><code>vec_order.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>vec_order()</code> computes the order of <code>x</code>. For data frames, the order is
computed along the rows by computing the order of the first column and
using subsequent columns to break ties.</p>
<p><code>vec_sort()</code> sorts <code>x</code>. It is equivalent to <code>vec_slice(x, vec_order(x))</code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">vec_order</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">...</span>,
  direction <span class="op">=</span> <span class="st">"asc"</span>,
  na_value <span class="op">=</span> <span class="st">"largest"</span>,
  nan_distinct <span class="op">=</span> <span class="cn">FALSE</span>,
  chr_proxy_collate <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span>

<span class="fu">vec_sort</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">...</span>,
  direction <span class="op">=</span> <span class="st">"asc"</span>,
  na_value <span class="op">=</span> <span class="st">"largest"</span>,
  nan_distinct <span class="op">=</span> <span class="cn">FALSE</span>,
  chr_proxy_collate <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A vector</p></dd>
<dt>...</dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>
<dt>direction</dt>
<dd><p>Direction to sort in.</p><ul><li><p>A single <code>"asc"</code> or <code>"desc"</code> for ascending or descending order
respectively.</p></li>
<li><p>For data frames, a length <code>1</code> or <code>ncol(x)</code> character vector containing
only <code>"asc"</code> or <code>"desc"</code>, specifying the direction for each column.</p></li>
</ul></dd>
<dt>na_value</dt>
<dd><p>Ordering of missing values.</p><ul><li><p>A single <code>"largest"</code> or <code>"smallest"</code> for ordering missing values as the
largest or smallest values respectively.</p></li>
<li><p>For data frames, a length <code>1</code> or <code>ncol(x)</code> character vector containing
only <code>"largest"</code> or <code>"smallest"</code>, specifying how missing values should
be ordered within each column.</p></li>
</ul></dd>
<dt>nan_distinct</dt>
<dd><p>A single logical specifying whether or not <code>NaN</code> should
be considered distinct from <code>NA</code> for double and complex vectors. If <code>TRUE</code>,
<code>NaN</code> will always be ordered between <code>NA</code> and non-missing numbers.</p></dd>
<dt>chr_proxy_collate</dt>
<dd><p>A function generating an alternate representation
of character vectors to use for collation, often used for locale-aware
ordering.</p><ul><li><p>If <code>NULL</code>, no transformation is done.</p></li>
<li><p>Otherwise, this must be a function of one argument. The function will be
invoked with <code>x</code>, if it is a character vector, after it has been
translated to UTF-8, and should return a character vector with the same
length as <code>x</code>. The result should sort as expected in the C-locale,
regardless of encoding.</p></li>
<li><p>For data frames, <code>chr_proxy_collate</code> will be applied to all character
columns.</p></li>
</ul><p>Common transformation functions include: <code><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower()</a></code> for case-insensitive
ordering and <code><a href="https://rdrr.io/pkg/stringi/man/stri_sort_key.html" class="external-link">stringi::stri_sort_key()</a></code> for locale-aware ordering.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <ul><li><p><code>vec_order()</code> an integer vector the same size as <code>x</code>.</p></li>
<li><p><code>vec_sort()</code> a vector with the same size and type as <code>x</code>.</p></li>
</ul></div>
    <div id="differences-with-order-">
    <h2>Differences with <code><a href="https://rdrr.io/r/base/order.html" class="external-link">order()</a></code></h2>
    


<p>Unlike the <code>na.last</code> argument of <code><a href="https://rdrr.io/r/base/order.html" class="external-link">order()</a></code> which decides the positions of
missing values irrespective of the <code>decreasing</code> argument, the <code>na_value</code>
argument of <code>vec_order()</code> interacts with <code>direction</code>. If missing values
are considered the largest value, they will appear last in ascending order,
and first in descending order.</p>
<p>Character vectors are ordered in the C-locale. This is different from
<code><a href="https://rdrr.io/r/base/order.html" class="external-link">base::order()</a></code>, which respects <code><a href="https://rdrr.io/r/base/locales.html" class="external-link">base::Sys.setlocale()</a></code>. Sorting in a
consistent locale can produce more reproducible results between different
sessions and platforms, however, the results of sorting in the C-locale
can be surprising. For example, capital letters sort before lower case
letters. Sorting <code>c("b", "C", "a")</code> with <code>vec_sort()</code> will return
<code>c("C", "a", "b")</code>, but with <code><a href="https://rdrr.io/r/base/order.html" class="external-link">base::order()</a></code> will return <code>c("a", "b", "C")</code>
unless <code>base::order(method = "radix")</code> is explicitly set, which also uses
the C-locale. While sorting with the C-locale can be useful for
algorithmic efficiency, in many real world uses it can be the cause of
data analysis mistakes. To balance these trade-offs, you can supply a
<code>chr_proxy_collate</code> function to transform character vectors into an
alternative representation that orders in the C-locale in a less surprising
way. For example, providing <code><a href="https://rdrr.io/r/base/chartr.html" class="external-link">base::tolower()</a></code> as a transform will order the
original vector in a case-insensitive manner. Locale-aware ordering can be
achieved by providing <code><a href="https://rdrr.io/pkg/stringi/man/stri_sort_key.html" class="external-link">stringi::stri_sort_key()</a></code> as a transform, setting the
collation options as appropriate for your locale.</p>
<p>Character vectors are always translated to UTF-8 before ordering, and before
any transform is applied by <code>chr_proxy_collate</code>.</p>
<p>For complex vectors, if either the real or imaginary component is <code>NA</code> or
<code>NaN</code>, then the entire observation is considered missing.</p>
    </div>
    <div id="dependencies-of-vec-order-">
    <h2>Dependencies of <code>vec_order()</code></h2>
    

<ul><li><p><code><a href="vec_proxy_compare.html">vec_proxy_order()</a></code></p></li>
</ul></div>
    <div id="dependencies-of-vec-sort-">
    <h2>Dependencies of <code>vec_sort()</code></h2>
    

<ul><li><p><code>vec_order()</code></p></li>
<li><p><code><a href="vec_slice.html">vec_slice()</a></code></p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, <span class="fl">9</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">vec_order</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  4  7  2  5  1  9  3  6  8 10</span>
<span class="r-in"><span class="fu">vec_sort</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0.690 0.690 0.726 0.726 0.904 0.904 0.951 0.951 0.951    NA</span>
<span class="r-in"><span class="fu">vec_sort</span><span class="op">(</span><span class="va">x</span>, direction <span class="op">=</span> <span class="st">"desc"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]    NA 0.951 0.951 0.951 0.904 0.904 0.726 0.726 0.690 0.690</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Can also handle data frames</span></span>
<span class="r-in"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>g <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">10</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, x <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">vec_order</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  7  2  5  3  6 10  4  1  9  8</span>
<span class="r-in"><span class="fu">vec_sort</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    g     x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1 0.690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  1 0.726</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  1 0.726</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  1 0.951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  1 0.951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  2 0.690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2 0.904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  2 0.904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 2 0.951</span>
<span class="r-in"><span class="fu">vec_sort</span><span class="op">(</span><span class="va">df</span>, direction <span class="op">=</span> <span class="st">"desc"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    g     x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  2 0.951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2 0.904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  2 0.904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  2 0.690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  1 0.951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  1 0.951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  1 0.726</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  1 0.726</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 1 0.690</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For data frames, `direction` and `na_value` are allowed to be vectors</span></span>
<span class="r-in"><span class="co"># with length equal to the number of columns in the data frame</span></span>
<span class="r-in"><span class="fu">vec_sort</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">df</span>,</span>
<span class="r-in">  direction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"desc"</span>, <span class="st">"asc"</span><span class="op">)</span>,</span>
<span class="r-in">  na_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"largest"</span>, <span class="st">"smallest"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    g     x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  2 0.690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2 0.904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  2 0.904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  2 0.951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  1 0.690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  1 0.726</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  1 0.726</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  1 0.951</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 1 0.951</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Character vectors are ordered in the C locale, which orders capital letters</span></span>
<span class="r-in"><span class="co"># below lowercase ones</span></span>
<span class="r-in"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"A"</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">vec_sort</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "A" "B" "a"</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># To order in a case-insensitive manner, provide a `chr_proxy_collate`</span></span>
<span class="r-in"><span class="co"># function that transforms the strings to all lowercase</span></span>
<span class="r-in"><span class="fu">vec_sort</span><span class="op">(</span><span class="va">y</span>, chr_proxy_collate <span class="op">=</span> <span class="va">tolower</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "A" "a" "B"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Hadley Wickham, Lionel Henry, Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

